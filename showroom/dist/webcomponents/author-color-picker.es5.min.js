var AuthorColorPickerElement=function(){"use strict";function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var e;window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-color-picker> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),0<(e=Array.from(new Set([])).filter(function(e){return!customElements.get(e)})).length&&(console.error("[ERROR] <author-color-picker> Required dependenc".concat(1!==e.length?"ies":"y"," not found: ").concat(e.map(function(e){return"<".concat(e,">")}).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1]))),e.forEach(function(e,t){return console.info("".concat(t+1,". <").concat(e,"> is available at ").concat("https://github.com/author-elements/color-picker".replace("color-picker",e.replace("author-",""))))}));var t=function(e){function o(){var u,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=this,t=a(o).call(this,'<template><style>@charset "UTF-8"; :host{contain:content;display:flex;flex-direction:column}:host *,:host :after,:host :before{box-sizing:border-box}:host .wrapper{position:relative;flex:1;display:flex;flex-direction:column}:host .canvas-wrapper{flex:1;display:flex;flex-direction:column}:host canvas{flex:1;display:block;width:100%;height:100%}:host ::slotted(*){position:absolute;z-index:1}author-color-picker{contain:content;display:flex;flex-direction:column}author-color-picker *,author-color-picker :after,author-color-picker :before{box-sizing:border-box}author-color-picker .wrapper{position:relative;flex:1;display:flex;flex-direction:column}author-color-picker .canvas-wrapper{flex:1;display:flex;flex-direction:column}author-color-picker canvas{flex:1;display:block;width:100%;height:100%}author-color-picker *{position:absolute;z-index:1}</style><div class="wrapper"><slot></slot><div class="canvas-wrapper"><canvas></canvas></div></div></template>'),(u=!t||"object"!=typeof t&&"function"!=typeof t?c(e):t).PRIVATE.defaultAxis="*",u.PRIVATE.pointerupHandler=function(e){var t=u.PRIVATE,o=t.generateColorObject,n=t.generatePositionObject,r=t.handles,i=t.pointermoveHandler,a=t.pointerupHandler,l=!0,c=null;1<r.length?l=!1:0!==r.length&&(r.item(0).position=c=n()),l&&u.emit("change",{color:o(),position:c||n()}),document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",a)},u.PRIVATE.pointermoveHandler=function(e){if(!(e.buttons<1)){document.addEventListener("pointerup",u.PRIVATE.pointerupHandler);u.UTIL.getPercentageDecimal;var t=u.PRIVATE,o=t.generateColorObject,n=t.generatePositionObject,r=t.handles,i=t.position,a=u.PRIVATE.getRelativePosition(e);u.position.x&&a.x===i.x&&u.position.y&&a.y===i.y||(u.PRIVATE.setColor(a),u.PRIVATE.position=a,0!==r.length&&(r.item(0).position=u.position),u.emit("slide",{color:o(),position:n()}))}},u.UTIL.defineProperties({defaultMode:{private:!0,readonly:!0,default:"single-hue"},defaultOrientation:{private:!0,readonly:!0,default:"horizontal"},validModes:{private:!0,readonly:!0,default:["single-hue","all-hues","gradient"]},hue:{private:!0,default:0},saturation:{private:!0,default:0},value:{private:!0,default:100},alpha:{private:!0,default:100},canvas:{private:!0,readonly:!0,get:function(){return u.shadowRoot.querySelector("canvas")}},context:{private:!0,readonly:!0,get:function(){return u.PRIVATE.canvas.getContext("2d")}},initialWidth:{private:!0,default:236},initialHeight:{private:!0,default:118}}),u.UTIL.defineAttributes({mode:u.PRIVATE.defaultMode,orientation:u.PRIVATE.defaultOrientation}),u.UTIL.definePrivateMethods({drawSingleHueSpectrum:function(e,t,o){var n=u.PRIVATE,r=n.context,i=(0,n.HSVToRGB)(e,100,100);r.clearRect(0,0,t,o),r.fillStyle="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", 1)"),r.fillRect(0,0,t,o);var a={x:r.createLinearGradient(0,0,t,0),y:r.createLinearGradient(0,0,0,o)};a.x.addColorStop(0,"rgba(255, 255, 255, 1)"),a.x.addColorStop(1,"rgba(255, 255, 255, 0)"),r.fillStyle=a.x,r.fillRect(0,0,t,o),a.y.addColorStop(0,"rgba(0, 0, 0, 0)"),a.y.addColorStop(1,"rgba(0, 0, 0, 1)"),r.fillStyle=a.y,r.fillRect(0,0,t,o)},drawAllHueSpectrum:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"horizontal",n=u.PRIVATE.context,r="horizontal"===o?[0,0,e,0]:[0,0,0,t],i=n.createLinearGradient.apply(n,r);i.addColorStop(0,"#F00"),i.addColorStop(1/6,"#FF0"),i.addColorStop(2/6,"#0F0"),i.addColorStop(.5,"#0FF"),i.addColorStop(4/6,"#00F"),i.addColorStop(5/6,"#F0F"),i.addColorStop(1,"#F00"),n.fillStyle=i,n.fillRect(0,0,e,t)},draw:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u.clientWidth,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u.clientHeight,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:u.PRIVATE.hue,n=u.PRIVATE,r=n.canvas,i=n.drawAllHueSpectrum,a=n.drawSingleHueSpectrum;switch(r.width=e,r.height=t,u.mode){case"single-hue":return a(o,e,t);case"all-hues":return i(e,t);default:u.UTIL.throwError({message:'Invalid mode "'.concat(u.mode,'"')})}},generateColorObject:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u.PRIVATE.hue,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u.PRIVATE.saturation,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:u.PRIVATE.value,r=u.PRIVATE,i=r.alpha,a=(0,r.HSVToRGB)(t,o,n);return{r:a[0],g:a[1],b:a[2],a:i,hex:"#".concat((e=u.PRIVATE).RGBToHex.apply(e,s(a))),rgba:"rgba(".concat(a.join(","),",").concat(i/100,")")}},HSVToRGB:function(e,t,o){var n,r,i,a,l,c,u,s;if(e=Math.max(0,Math.min(360,e)),t=Math.max(0,Math.min(100,t)),o=Math.max(0,Math.min(100,o)),o/=100,0==(t/=100))return n=r=i=o,[Math.round(255*n),Math.round(255*r),Math.round(255*i)];switch(c=o*(1-t),u=o*(1-t*(l=(e/=60)-(a=Math.floor(e)))),s=o*(1-t*(1-l)),a){case 0:n=o,r=s,i=c;break;case 1:n=u,r=o,i=c;break;case 2:n=c,r=o,i=s;break;case 3:n=c,r=u,i=o;break;case 4:n=s,r=c,i=o;break;default:n=o,r=c,i=u}return[Math.round(255*n),Math.round(255*r),Math.round(255*i)]},RGBToHSV:function(e,t,o){e/=255,t/=255,o/=255;var n,r,i=Math.max(e,t,o),a=Math.min(e,t,o),l=i,c=i-a;if(r=0===i?0:c/i,i===a)n=0;else{switch(i){case e:n=(t-o)/c+(t<o?6:0);break;case t:n=(o-e)/c+2;break;case o:n=(e-t)/c+4}n/=6}return[n,r,l]},RGBToHex:function(e,t,o){var n=u.PRIVATE.unitToHex;return"".concat(n(e)).concat(n(t)).concat(n(o))},unitToHex:function(e){var t=Number(e).toString(16);return t.length<2&&(t="0".concat(t)),t.toUpperCase()},setColor:function(e){var t=u.UTIL.getPercentageDecimal;switch(u.mode){case"single-hue":u.PRIVATE.saturation=100*t(e.x,u.clientWidth),u.PRIVATE.value=100-100*t(e.y,u.clientHeight);break;case"all-hues":u.PRIVATE.hue="horizontal"===u.orientation?360*t(e.x,u.clientWidth):360*t(e.y,u.clientHeight),u.PRIVATE.saturation=100,u.PRIVATE.value=100}}}),u.UTIL.registerListeners(c(u),{"attribute.change":function(e){var t=e.detail,o=t.attribute,n=t.oldValue,r=t.newValue;if(r!==n){var i=u.PRIVATE,a=i.defaultMode,l=i.validModes;switch(o){case"mode":if(!r.split(" ").filter(function(e){return l.includes(e)}).length)return u.setAttribute("mode",a),u.UTIL.throwError({message:'Invalid mode "'.concat(r,'". Valid values include: "').concat(l.join('", "'),'"')})}}},connected:function(){u.hasAttribute("axis")||(u.axis=u.PRIVATE.defaultAxis),u.removeEventListener("pointerdown",u.PRIVATE.pointerdownHandler);var e=u.PRIVATE;(0,e.draw)(e.initialWidth,e.initialHeight)},pointerdown:function(e){u.PRIVATE.position=u.PRIVATE.getRelativePosition(e);u.UTIL.getPercentageDecimal;var t=u.PRIVATE,o=t.generateColorObject,n=t.generatePositionObject,r=t.handles,i=(t.HSVToRGB,t.hue,t.pointermoveHandler),a=t.position;1<r.length||(u.PRIVATE.setColor(a),0!==r.length&&(r.item(0).position=u.position),u.emit("change",{color:o(),position:n()}),document.addEventListener("pointermove",i))}}),u}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,AuthorSliderElement),t=o,r=[{key:"observedAttributes",get:function(){return[].concat(s(AuthorSliderElement.observedAttributes),["mode","orientation"])}}],(n=[{key:"hue",get:function(){return this.PRIVATE.hue},set:function(e){e=Math.max(0,Math.min(360,e)),this.PRIVATE.hue=360===e?0:e,this.PRIVATE.draw(),this.emit("change",{color:this.PRIVATE.generateColorObject(),position:this.PRIVATE.generatePositionObject()})}},{key:"rgb",set:function(e){var t=e.r,o=e.g,n=e.b,r=this.PRIVATE,i=r.generateColorObject,a=r.generatePositionObject,l=r.handles,c=r.RGBToHSV,u=(r.setColor,c(t,o,n));this.PRIVATE.hue=360*u[0],this.PRIVATE.saturation=100*u[1],this.PRIVATE.value=100*u[2],this.PRIVATE.draw(),1===l.length&&(l.item(0).position={x:{pct:u[1]},y:{pct:1-u[2]}}),this.emit("change",{color:i(),position:a()})}},{key:"position",get:function(){return this.PRIVATE.generatePositionObject()}},{key:"selectedColor",get:function(){return this.PRIVATE.generateColorObject()}}])&&i(t.prototype,n),r&&i(t,r),o}();return customElements.define("author-color-picker",t),t}();
//# sourceMappingURL=author-color-picker.es5.min.js.map
