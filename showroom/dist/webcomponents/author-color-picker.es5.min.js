var AuthorColorPickerElement=function(){"use strict";function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var e;window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-color-picker> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),0<(e=Array.from(new Set([])).filter(function(e){return!customElements.get(e)})).length&&(console.error("[ERROR] <author-color-picker> Required dependenc".concat(1!==e.length?"ies":"y"," not found: ").concat(e.map(function(e){return"<".concat(e,">")}).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1]))),e.forEach(function(e,t){return console.info("".concat(t+1,". <").concat(e,"> is available at ").concat("https://github.com/author-elements/color-picker".replace("color-picker",e.replace("author-",""))))}));var t=function(e){function o(){var l,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=this,t=a(o).call(this,'<template><style>@charset "UTF-8"; :host{contain:content;display:block}:host *,:host :after,:host :before{box-sizing:border-box}:host .wrapper{position:relative}:host canvas{display:block;width:100%;height:100%}:host ::slotted(*){position:absolute;z-index:1}author-color-picker{contain:content;display:block}author-color-picker *,author-color-picker :after,author-color-picker :before{box-sizing:border-box}author-color-picker .wrapper{position:relative}author-color-picker canvas{display:block;width:100%;height:100%}author-color-picker *{position:absolute;z-index:1}</style><div class="wrapper"><slot></slot><div><canvas></canvas></div></div></template>'),(l=!t||"object"!=typeof t&&"function"!=typeof t?s(e):t).UTIL.defineProperties({canvas:{private:!0,readonly:!0,get:function(){return l.shadowRoot.querySelector("canvas")}},context:{private:!0,readonly:!0,get:function(){return l.PRIVATE.canvas.getContext("2d")}},position:{private:!0,default:{x:0,y:0}},dimensions:{private:!0,readonly:!0,get:function(){return l.PRIVATE.canvas.getBoundingClientRect()}},initialWidth:{private:!0,default:0},initialheight:{private:!0,default:0},currentColor:{private:!0,default:{r:255,g:255,b:255}},selectedColor:{private:!0,default:{r:255,g:255,b:255}},previousColor:{private:!0,default:{r:255,g:255,b:255}}}),l.UTIL.definePrivateMethods({draw:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:l.PRIVATE.dimensions.width,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.PRIVATE.dimensions.height,o=l.PRIVATE,r=o.canvas,n=o.context;r.width=e,r.height=t,n.clearRect(0,0,e,t);var i={x:n.createLinearGradient(0,0,e,0),y:n.createLinearGradient(0,0,0,t)};i.x.addColorStop(0,"red"),i.x.addColorStop(1/6,"fuchsia"),i.x.addColorStop(2/6,"blue"),i.x.addColorStop(.5,"aqua"),i.x.addColorStop(4/6,"lime"),i.x.addColorStop(5/6,"yellow"),i.x.addColorStop(1,"red"),n.fillStyle=i.x,n.fillRect(0,0,e,t),i.y.addColorStop(0,"white"),i.y.addColorStop(.5,"rgba(255,255,255,0)"),i.y.addColorStop(.5,"rgba(0,0,0,0)"),i.y.addColorStop(1,"black"),n.fillStyle=i.y,n.fillRect(0,0,e,t)},generateColorObj:function(e){var t=e.r,o=e.g,r=e.b,n=l.PRIVATE.RGBToHSL({r:t,g:o,b:r}),i=n[0],a=n[1],c=n[2];return{red:t,green:o,blue:r,hex:"#".concat(l.PRIVATE.RGBToHex({r:t,g:o,b:r})),rgb:"rgb(".concat(t,",").concat(o,",").concat(r,")"),hsl:"hsl(".concat(i,",").concat(100*a,"%, ").concat(100*c,"%)"),hue:i,saturation:a,lightness:c}},unitToHex:function(e){var t=Number(e).toString(16);return t.length<2&&(t="0".concat(t)),t.toUpperCase()},RGBToHex:function(e){var t=e.r,o=void 0===t?255:t,r=e.g,n=void 0===r?255:r,i=e.b,a=void 0===i?255:i,c=l.PRIVATE.unitToHex;return"".concat(c(o)).concat(c(n)).concat(c(a))},RGBToHSL:function(e){var t=e.r,o=e.g,r=e.b;t/=255,o/=255,r/=255;var n,i=Math.min(t,o,r),a=Math.max(t,o,r),c=a-i;switch(a){case i:n=0;break;case t:n=(o-r)/c;break;case o:n=2+(r-t)/c;break;case r:n=4+(t-o)/c}(n=Math.min(60*n,360))<0&&(n+=360);var l=(i+a)/2;return[n,l<=.5?c/(a+i):c/(2-a-i),l]},pointermoveHandler:function(e){if(!(e.buttons<1)){var t=l.PRIVATE.dimensions,o=(t.top,t.left,t.width,t.height,l.PRIVATE.getRelativePosition(e));o.x===l.position.x.px&&o.y===l.position.y.px||(l.PRIVATE.currentColor=l.PRIVATE.getColor(o),l.PRIVATE.position=o,l.emit("sample",{color:l.PRIVATE.generateColorObj(l.PRIVATE.currentColor),position:l.position}),document.addEventListener("pointerup",l.PRIVATE.pointerupHandler))}},getColor:function(e){var t=e.x,o=e.y,r=l.PRIVATE.context.getImageData(t,o,1,1).data;return{r:r[0],g:r[1],b:r[2]}},pointerupHandler:function(e){var t=l.PRIVATE,o=t.currentColor,r=t.pointermoveHandler,n=t.pointerupHandler;l.PRIVATE.previousColor=l.PRIVATE.selectedColor,l.PRIVATE.selectedColor=o,l.emit("change",{previous:l.previousColor,color:l.selectedColor,position:l.position}),document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",n)},getRelativePosition:function(e){var t=l.PRIVATE.dimensions,o=t.top,r=t.left,n=t.width,i=t.height;return{x:Math.min(Math.max(e.pageX-r,0),n-.1),y:Math.min(Math.max(e.pageY-o,0),i)}}}),l.UTIL.registerListeners(s(l),{connected:function(){var e=l.PRIVATE,t=e.dimensions,o=e.draw;l.PRIVATE.initialWidth=t.width,l.PRIVATE.initialHeight=t.height,o()},rendered:function(){return l.UTIL.registerListener(window,"resize",function(e){return l.PRIVATE.draw()})}}),l.UTIL.registerListeners(s(l),{pointerenter:function(e){var t=l.PRIVATE,o=t.dimensions,r=t.draw,n=t.initialWidth,i=t.initialHeight;n===o.width&&i===o.height||r()},pointerdown:function(e){l.PRIVATE.position=l.PRIVATE.getRelativePosition(e);var t=l.PRIVATE,o=t.position,r=t.getColor,n=t.pointermoveHandler;l.PRIVATE.previousColor=l.PRIVATE.selectedColor,l.PRIVATE.selectedColor=r(o),l.emit("change",{previous:l.previousColor,color:l.selectedColor,position:l.position}),document.addEventListener("pointermove",n)}}),l}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,AuthorBaseElement(HTMLElement)),t=o,(r=[{key:"position",get:function(){var e=this.PRIVATE,t=e.position,o=e.dimensions;return{x:{px:t.x,percentage:this.UTIL.getPercentageDecimal(t.x,o.width)},y:{px:t.y,percentage:this.UTIL.getPercentageDecimal(t.y,o.height)}}}},{key:"previousColor",get:function(){return this.PRIVATE.generateColorObj(this.PRIVATE.previousColor)}},{key:"selectedColor",get:function(){return this.PRIVATE.generateColorObj(this.PRIVATE.selectedColor)}}])&&i(t.prototype,r),n&&i(t,n),o}();return customElements.define("author-color-picker",t),t}();
//# sourceMappingURL=author-color-picker.es5.min.js.map
