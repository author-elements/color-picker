{"version":3,"file":"author-slider.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSliderElement extends AuthorBaseElement(HTMLElement) {\n  constructor (templateString = null) {\n    super(templateString || `{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      defaultAxis: {\n        private: true,\n        default: 'x'\n      },\n\n      handles: {\n        private: true,\n        readonly: true,\n        get: () => this.querySelectorAll('author-slider-handle')\n      },\n\n      validAxisValues: {\n        private: true,\n        readonly: true,\n        default: ['x', 'y', '*']\n      },\n\n      currentPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      position: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      },\n\n      previousPosition: {\n        private: true,\n        default: {\n          x: 0,\n          y: 0\n        }\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      axis: this.PRIVATE.defaultAxis\n    })\n\n    this.UTIL.definePrivateMethods({\n      generateCoordinates: (getX, getY) => {\n        switch (this.axis) {\n          case '*': return {\n            x: getX(),\n            y: getY()\n          }\n\n          case 'x': return {\n            x: getX(),\n            y: null\n          }\n\n          case 'y': return {\n            x: null,\n            y: getY()\n          }\n\n          default: return this.UTIL.throwError({\n            message: !this.axis\n              ? 'No axis specified'\n              : `Invalid axis \"${this.axis}\"`\n          })\n        }\n      },\n\n      generatePositionObject: (position = this.PRIVATE.position) => this.PRIVATE.generateCoordinates(() => ({\n        px: position.x,\n        pct: this.UTIL.getPercentageDecimal(position.x, this.clientWidth)\n      }), () => ({\n        px: position.y,\n        pct: this.UTIL.getPercentageDecimal(position.y, this.clientHeight)\n      })),\n\n      getRelativePosition: evt => {\n        return this.PRIVATE.generateCoordinates(() => {\n          return Math.min(Math.max(evt.pageX - this.offsetLeft, 0), this.clientWidth)\n        }, () => {\n          return Math.min(Math.max(evt.pageY - this.offsetTop, 0), this.clientHeight)\n        })\n      },\n\n      pointerdownHandler: evt => {\n        let previous = this.PRIVATE.position\n        let reposition = true\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { handles, position, pointermoveHandler } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          previous: this.PRIVATE.generatePositionObject(previous),\n          position: this.position\n        })\n\n        document.addEventListener('pointermove', this.PRIVATE.pointermoveHandler)\n      },\n\n      pointermoveHandler: evt => {\n        if (evt.buttons < 1) {\n          return\n        }\n\n        document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n        let { handles } = this.PRIVATE\n        let relative = this.PRIVATE.getRelativePosition(evt)\n\n        if ((!this.position.x || relative.x !== this.position.x.px) || (!this.position.y || relative.y !== this.position.y.px)) {\n          this.PRIVATE.currentPosition = relative\n          let position = this.PRIVATE.generatePositionObject(this.PRIVATE.currentPosition)\n\n          if (handles.length !== 0) {\n            handles.item(0).position = position\n          }\n\n          this.emit('slide', position)\n        }\n      },\n\n      pointerupHandler: evt => {\n        let { currentPosition, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n        let reposition = true\n\n        this.PRIVATE.position = currentPosition\n\n        if (handles.length > 1) {\n          reposition = false\n        } else if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        if (reposition) {\n          this.emit('change', {\n            previous: this.previousPosition,\n            position: this.position\n          })\n\n          this.PRIVATE.previousPosition = currentPosition\n        }\n\n        document.removeEventListener('pointermove', pointermoveHandler)\n        document.removeEventListener('pointerup', pointerupHandler)\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultAxis, validAxisValues } = this.PRIVATE\n\n        switch (attribute) {\n          case 'axis':\n            let arr = newValue.split(' ').filter(axis => validAxisValues.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('axis', defaultAxis)\n\n              return this.UTIL.throwError({\n                message: `Invalid axis \"${newValue}\". Valid values include any combination of the following, separated by spaces: \"${validAxisValues.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      pointerdown: this.PRIVATE.pointerdownHandler\n    })\n  }\n\n  static get observedAttributes () {\n    return ['axis']\n  }\n\n  get previousPosition () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.previousPosition)\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject(this.PRIVATE.position)\n  }\n}\n\ncustomElements.define('author-slider', AuthorSliderElement)\n\nexport default AuthorSliderElement\n"],"names":["AuthorSliderElement","templateString","UTIL","defineProperties","defaultAxis","private","default","handles","readonly","get","querySelectorAll","validAxisValues","currentPosition","x","y","position","previousPosition","defineAttributes","axis","PRIVATE","definePrivateMethods","generateCoordinates","getX","getY","throwError","message","generatePositionObject","px","pct","getPercentageDecimal","clientWidth","clientHeight","getRelativePosition","evt","Math","min","max","pageX","offsetLeft","pageY","offsetTop","pointerdownHandler","previous","pointermoveHandler","length","item","emit","document","addEventListener","buttons","pointerupHandler","relative","reposition","removeEventListener","registerListeners","detail","attribute","oldValue","newValue","arr","split","filter","includes","setAttribute","join","pointerdown","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":"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"}