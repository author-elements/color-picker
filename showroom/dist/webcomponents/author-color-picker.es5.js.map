{"version":3,"file":"author-color-picker.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorColorPickerElement extends AuthorSliderElement {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    // Override AuthorSliderElement defaults\n    this.PRIVATE.defaultAxis = '*'\n\n    this.PRIVATE.pointerupHandler = evt => {\n      let { generateColorObject, generatePositionObject, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n      let reposition = true\n\n      // this.PRIVATE.previousColor = this.PRIVATE.selectedColor\n      // this.PRIVATE.selectedColor = currentColor\n\n      let position = null\n\n      if (handles.length > 1) {\n        reposition = false\n      } else if (handles.length !== 0) {\n        handles.item(0).position = position = generatePositionObject()\n      }\n\n      if (reposition) {\n        this.emit('change', {\n          // previous: this.previousColor,\n          color: generateColorObject(),\n          position: position || generatePositionObject()\n        })\n      }\n\n      document.removeEventListener('pointermove', pointermoveHandler)\n      document.removeEventListener('pointerup', pointerupHandler)\n    }\n\n    this.PRIVATE.pointermoveHandler = evt => {\n      if (evt.buttons < 1) {\n        return\n      }\n\n      let { getPercentageDecimal } = this.UTIL\n      let { generateColorObject, generatePositionObject, handles, position } = this.PRIVATE\n      let relative = this.PRIVATE.getRelativePosition(evt)\n\n      if ((!this.position.x || relative.x !== position.x) || (!this.position.y || relative.y !== position.y)) {\n        this.PRIVATE.setSampledColor(relative)\n        this.PRIVATE.position = relative\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('slide', {\n          color: generateColorObject(),\n          position: generatePositionObject()\n        })\n      }\n    }\n\n    this.UTIL.defineProperties({\n      defaultMode: {\n        private: true,\n        readonly: true,\n        default: 'default'\n      },\n\n      defaultOrientation: {\n        private: true,\n        readonly: true,\n        default: 'horizontal'\n      },\n\n      validModes: {\n        private: true,\n        readonly: true,\n        default: ['default', 'hue', 'gradient']\n      },\n\n      hue: {\n        private: true,\n        default: 0\n      },\n\n      saturation: {\n        private: true,\n        default: 0\n      },\n\n      value: {\n        private: true,\n        default: 100\n      },\n\n      alpha: {\n        private: true,\n        default: 100\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      mode: this.PRIVATE.defaultMode,\n      orientation: this.PRIVATE.defaultOrientation\n    })\n\n    this.UTIL.definePrivateMethods({\n      update: () => {\n        let { hue, saturation, value, HSVToRGB, setHandlePosition } = this.PRIVATE\n\n        switch (this.mode) {\n          case 'default':\n            this.UTIL.setStyleProperty('bgColorRule', 'background-color', `rgba(${HSVToRGB(hue, 100, 100).join(', ')}, 1)`)\n\n            return setHandlePosition({\n              x: { pct: saturation / 100 },\n              y: { pct: 1 - (value / 100) }\n            })\n\n          case 'hue': return setHandlePosition({\n            x: { pct: hue / 360 }\n          })\n        }\n      },\n\n      setHandlePosition: position => {\n        let { handles } = this.PRIVATE\n\n        if (handles.length === 1) {\n          handles.item(0).position = position\n        }\n      },\n\n      generateColorObject: (h = this.PRIVATE.hue, s = this.PRIVATE.saturation, v = this.PRIVATE.value) => {\n        let { alpha, HSVToRGB } = this.PRIVATE\n\n        let rgb = HSVToRGB(h, s, v)\n        let r = rgb[0]\n        let g = rgb[1]\n        let b = rgb[2]\n\n        return {\n          hue: this.PRIVATE.hue,\n          saturation: this.PRIVATE.saturation,\n          value: this.PRIVATE.value,\n          r,\n          g,\n          b,\n          alpha,\n          hex: `#${this.PRIVATE.RGBToHex(...rgb)}`,\n          rgba: `rgba(${rgb.join(',')},${alpha / 100})`\n        }\n      },\n\n      hexToRGB: hex => {\n        let [ , short, long ] = String(hex).match(/^#?(?:([\\da-f]{3})[\\da-f]?|([\\da-f]{6})(?:[\\da-f]{2})?)$/i) || []\n        let rgb\n\n        if (short) {\n          return Array.from(short, s => Number.parseInt(s, 16)).map(n => (n << 4) | n)\n        }\n\n        let value = Number.parseInt(long, 16)\n        return [ value >> 16, value >> 8 & 0xFF, value & 0xFF ]\n      },\n\n      HSVToRGB: (h = this.PRIVATE.hue, s = this.PRIVATE.saturation, v = this.PRIVATE.value) => {\n        h = Math.max(0, Math.min(360, h))\n        s = Math.max(0, Math.min(100, s)) / 100\n        v = Math.max(0, Math.min(100, v)) / 100\n\n        let f = n => {\n          let k = (n + h / 60) % 6\n          return v - v * s * Math.max(Math.min(k, 4 - k, 1), 0)\n        }\n\n        return [f(5) * 255, f(3) * 255, f(1) * 255]\n      },\n\n      RGBToHex: (r, g, b) => {\n        let unitToHex = unit => {\n          let hex = Number(unit).toString(16)\n\n          if (hex.length < 2) {\n            hex = `0${hex}`\n          }\n\n          return hex.toUpperCase()\n        }\n\n        return `${unitToHex(r)}${unitToHex(g)}${unitToHex(b)}`\n      },\n\n      RGBToHSV: (r, g, b) => {\n        r /= 255, g /= 255, b /= 255\n\n        let max = Math.max(r, g, b)\n        let min = Math.min(r, g, b)\n\n        let h, s, v = max\n        let diff = max - min\n        s = max === 0 ? 0 : diff / max\n\n        if (max === min) {\n          h = 0\n        } else {\n          switch (max) {\n            case r:\n              h = 60 * (0 + ((g - b) / diff))\n              break\n\n            case g:\n              h = 60 * (2 + ((b - r) / diff))\n              break\n\n            case b:\n              h = 60 * (4 + ((r - g) / diff))\n              break\n          }\n\n          h = h < 0 ? h + 360 : h\n        }\n\n        return [h, s * 100, v * 100]\n      },\n\n      setSampledColor: (position, percentage = false) => {\n        let { getPercentageDecimal } = this.UTIL\n\n        switch (this.mode) {\n          case 'default':\n            this.PRIVATE.saturation = getPercentageDecimal(position.x, this.clientWidth) * 100\n            this.PRIVATE.value = 100 - (getPercentageDecimal(position.y, this.clientHeight) * 100)\n            break\n\n          case 'hue':\n            this.PRIVATE.hue = this.orientation === 'horizontal'\n              ? getPercentageDecimal(position.x, this.clientWidth) * 360\n              : getPercentageDecimal(position.y, this.clientHeight) * 360\n\n            this.PRIVATE.saturation = 100\n            this.PRIVATE.value = 100\n            break\n        }\n      },\n\n      setRGB: (r, g, b) => {\n        let hsv = this.PRIVATE.RGBToHSV(r, g, b)\n\n        this.PRIVATE.hue = hsv[0]\n        this.PRIVATE.saturation = hsv[1]\n        this.PRIVATE.value = hsv[2]\n\n        this.PRIVATE.update()\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultMode, validModes } = this.PRIVATE\n\n        switch (attribute) {\n          case 'mode':\n            let arr = newValue.split(' ').filter(mode => validModes.includes(mode))\n\n            if (!arr.length) {\n              this.setAttribute('mode', defaultMode)\n\n              return this.UTIL.throwError({\n                message: `Invalid mode \"${newValue}\". Valid values include: \"${validModes.join('\", \"')}\"`\n              })\n            }\n\n            return this.PRIVATE.update()\n        }\n      },\n\n      connected: () => {\n        // Remove default author-slider pointerdown handler\n        this.removeEventListener('pointerdown', this.PRIVATE.pointerdownHandler)\n\n        // Reset AuthorSliderElement defaults\n        if (!this.hasAttribute('axis')) {\n          this.axis = this.PRIVATE.defaultAxis\n        }\n\n        this.UTIL.insertStyleRules({\n          bgColorRule: ':host {}'\n        })\n\n        this.PRIVATE.update()\n      },\n\n      pointerdown: evt => {\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { getPercentageDecimal } = this.UTIL\n        let { generateColorObject, generatePositionObject, handles, HSVToRGB, hue, pointermoveHandler, pointerupHandler, position } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        this.PRIVATE.setSampledColor(position)\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          color: generateColorObject(),\n          position: generatePositionObject()\n        })\n\n        document.addEventListener('pointerup', pointerupHandler)\n        document.addEventListener('pointermove', pointermoveHandler)\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return [...AuthorSliderElement.observedAttributes, 'mode', 'orientation']\n  }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject()\n  }\n\n  get hue () {\n    return this.PRIVATE.hue\n  }\n\n  set hue (val) {\n    val = Math.max(0, Math.min(360, val))\n    this.PRIVATE.hue = val === 360 ? 0 : val\n    this.PRIVATE.update()\n  }\n\n  get rgb () {\n    return this.PRIVATE.HSVToRGB()\n  }\n\n  set rgb ({r = 0, g = 0, b = 0}) {\n    this.PRIVATE.setRGB(Math.min(r, 255), Math.min(g, 255), Math.min(b, 255))\n  }\n\n  set red (val) {\n    let rgb = this.PRIVATE.HSVToRGB()\n    this.PRIVATE.setRGB(Math.min(val, 255), ...rgb.slice(1))\n  }\n\n  set r (val) {\n    this.red = val\n  }\n\n  set green (val) {\n    let rgb = this.PRIVATE.HSVToRGB()\n    this.PRIVATE.setRGB(rgb[0], Math.min(val, 255), rgb[2])\n  }\n\n  set g (val) {\n    this.green = val\n  }\n\n  set blue (val) {\n    let rgb = this.PRIVATE.HSVToRGB()\n    this.PRIVATE.setRGB(...rgb.slice(-2), Math.min(val, 255))\n  }\n\n  set b (val) {\n    this.blue = val\n  }\n\n  // set alpha (val) {\n  //   console.log(val)\n  // }\n\n  // set a (val) {\n  //   console.log(val)\n  // }\n\n  get hex () {\n    return `#${this.PRIVATE.RGBToHex(...this.PRIVATE.HSVToRGB())}`\n  }\n\n  set hex (val) {\n    this.PRIVATE.setRGB(...this.PRIVATE.hexToRGB(val))\n  }\n\n  set saturation (val) {\n    this.PRIVATE.saturation = Math.max(0, Math.min(100, val))\n    this.PRIVATE.update()\n  }\n\n  set s (val) {\n    this.saturation = val\n  }\n\n  set value (val) {\n    this.PRIVATE.value = Math.max(0, Math.min(100, val))\n    this.PRIVATE.update()\n  }\n\n  set v (val) {\n    this.value = val\n  }\n\n  set hsv ({ h, s, v }) {\n    h = Math.max(0, Math.min(360, h))\n    this.PRIVATE.hue = h === 360 ? 0 : h\n    this.PRIVATE.saturation = Math.max(0, Math.min(100, s))\n    this.PRIVATE.value = Math.max(0, Math.min(100, v))\n    this.PRIVATE.update()\n\n  }\n\n  // set lightness (val) {\n  //   console.log(val);\n  // }\n\n  // set hsl ({ h, s, l }) {\n  //   console.log(h, s, l)\n  // }\n}\n\ncustomElements.define('author-color-picker', AuthorColorPickerElement)\n\nexport default AuthorColorPickerElement\n"],"names":["AuthorColorPickerElement","PRIVATE","defaultAxis","pointerupHandler","evt","generateColorObject","generatePositionObject","handles","pointermoveHandler","reposition","position","length","item","emit","color","document","removeEventListener","buttons","getPercentageDecimal","UTIL","relative","getRelativePosition","x","y","setSampledColor","defineProperties","defaultMode","private","readonly","default","defaultOrientation","validModes","hue","saturation","value","alpha","defineAttributes","mode","orientation","definePrivateMethods","update","HSVToRGB","setHandlePosition","setStyleProperty","join","pct","h","s","v","rgb","r","g","b","hex","RGBToHex","rgba","hexToRGB","String","match","short","long","Array","from","Number","parseInt","map","n","Math","max","min","f","k","unitToHex","unit","toString","toUpperCase","RGBToHSV","diff","clientWidth","clientHeight","setRGB","hsv","registerListeners","detail","attribute","oldValue","newValue","arr","split","filter","includes","setAttribute","throwError","message","connected","pointerdownHandler","hasAttribute","axis","insertStyleRules","bgColorRule","pointerdown","addEventListener","val","slice","red","green","blue","AuthorSliderElement","observedAttributes","customElements","define"],"mappings":"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"}