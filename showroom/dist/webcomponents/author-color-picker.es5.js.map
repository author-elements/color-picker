{"version":3,"file":"author-color-picker.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorColorPickerElement extends AuthorSliderElement {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    // Override AuthorSliderElement defaults\n    this.PRIVATE.defaultAxis = '*'\n\n    this.PRIVATE.pointerupHandler = evt => {\n      let { generateColorObject, generatePositionObject, handles, pointermoveHandler, pointerupHandler } = this.PRIVATE\n      let reposition = true\n\n      // this.PRIVATE.previousColor = this.PRIVATE.selectedColor\n      // this.PRIVATE.selectedColor = currentColor\n\n      let position = null\n\n      if (handles.length > 1) {\n        reposition = false\n      } else if (handles.length !== 0) {\n        handles.item(0).position = position = generatePositionObject()\n      }\n\n      if (reposition) {\n        this.emit('change', {\n          // previous: this.previousColor,\n          color: generateColorObject(),\n          position: position || generatePositionObject()\n        })\n      }\n\n      document.removeEventListener('pointermove', pointermoveHandler)\n      document.removeEventListener('pointerup', pointerupHandler)\n    }\n\n    this.PRIVATE.pointermoveHandler = evt => {\n      if (evt.buttons < 1) {\n        return\n      }\n\n      document.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n\n      let { getPercentageDecimal } = this.UTIL\n      let { generateColorObject, generatePositionObject, handles, position } = this.PRIVATE\n      let relative = this.PRIVATE.getRelativePosition(evt)\n\n      if ((!this.position.x || relative.x !== position.x) || (!this.position.y || relative.y !== position.y)) {\n        this.PRIVATE.setColor(relative)\n        this.PRIVATE.position = relative\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('slide', {\n          color: generateColorObject(),\n          position: generatePositionObject()\n        })\n      }\n    }\n\n    this.UTIL.defineProperties({\n      defaultMode: {\n        private: true,\n        readonly: true,\n        default: 'single-hue'\n      },\n\n      defaultOrientation: {\n        private: true,\n        readonly: true,\n        default: 'horizontal'\n      },\n\n      validModes: {\n        private: true,\n        readonly: true,\n        default: ['single-hue', 'all-hues', 'gradient']\n      },\n\n      hue: {\n        private: true,\n        default: 0\n      },\n\n      saturation: {\n        private: true,\n        default: 0\n      },\n\n      value: {\n        private: true,\n        default: 100\n      },\n\n      alpha: {\n        private: true,\n        default: 100\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      mode: this.PRIVATE.defaultMode,\n      orientation: this.PRIVATE.defaultOrientation\n    })\n\n    this.UTIL.definePrivateMethods({\n      draw: () => {\n        let { handles, hue, HSVToRGB, saturation, value } = this.PRIVATE\n\n        switch (this.mode) {\n          case 'single-hue':\n            return this.UTIL.setStyleProperty('bgColorRule', 'background-color', `rgba(${HSVToRGB(hue, 100, 100).join(', ')}, 1)`)\n        }\n\n        if (handles.length === 1) {\n          handles.item(0).position = {\n            x: { pct: saturation / 100 },\n            y: { pct: 1 - (value / 100) }\n          }\n        }\n      },\n\n      generateColorObject: (h = this.PRIVATE.hue, s = this.PRIVATE.saturation, v = this.PRIVATE.value) => {\n        let { alpha, HSVToRGB } = this.PRIVATE\n\n        let rgb = HSVToRGB(h, s, v)\n        let r = rgb[0]\n        let g = rgb[1]\n        let b = rgb[2]\n\n        return {\n          hue: this.PRIVATE.hue,\n          saturation: this.PRIVATE.saturation,\n          value: this.PRIVATE.value,\n          r,\n          g,\n          b,\n          alpha,\n          hex: `#${this.PRIVATE.RGBToHex(...rgb)}`,\n          rgba: `rgba(${rgb.join(',')},${alpha / 100})`\n        }\n      },\n\n      hexToRGB: hex => {\n        let [ , short, long ] = String(hex).match(/^#?(?:([\\da-f]{3})[\\da-f]?|([\\da-f]{6})(?:[\\da-f]{2})?)$/i) || []\n        let rgb\n\n        if (short) {\n          return Array.from(short, s => Number.parseInt(s, 16)).map(n => (n << 4) | n)\n        }\n\n        let value = Number.parseInt(long, 16)\n        return [ value >> 16, value >> 8 & 0xFF, value & 0xFF ]\n      },\n\n      HSVToRGB: (h, s, v) => {\n        let r, g, b, i, f, p, q, t\n\n        h = Math.max(0, Math.min(360, h))\n        s = Math.max(0, Math.min(100, s))\n        v = Math.max(0, Math.min(100, v))\n\n        s /= 100;\n        v /= 100;\n\n        if(s == 0) {\n          r = g = b = v\n\n          return [\n            Math.round(r * 255),\n            Math.round(g * 255),\n            Math.round(b * 255)\n          ]\n        }\n\n        h /= 60\n        i = Math.floor(h)\n        f = h - i\n        p = v * (1 - s)\n        q = v * (1 - s * f)\n        t = v * (1 - s * (1 - f))\n\n        switch(i) {\n          case 0:\n            r = v\n            g = t\n            b = p\n            break\n\n          case 1:\n            r = q\n            g = v\n            b = p\n            break\n\n          case 2:\n            r = p\n            g = v\n            b = t\n            break\n\n          case 3:\n            r = p\n            g = q\n            b = v\n            break\n\n          case 4:\n            r = t\n            g = p\n            b = v\n            break\n\n          default:\n            r = v\n            g = p\n            b = q\n        }\n\n        return [\n          Math.round(r * 255),\n          Math.round(g * 255),\n          Math.round(b * 255)\n        ]\n      },\n\n      /**\n       * Converts an RGB color value to HSV. Conversion formula\n       * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n       * Assumes r, g, and b are contained in the set [0, 255] and\n       * returns h, s, and v in the set [0, 1].\n       *\n       * @param   Number  r       The red color value\n       * @param   Number  g       The green color value\n       * @param   Number  b       The blue color value\n       * @return  Array           The HSV representation\n       */\n      RGBToHSV: (red, green, blue) => {\n        red /= 255\n        green /= 255\n        blue /= 255\n\n        let max = Math.max(red, green, blue)\n        let min = Math.min(red, green, blue)\n        let hue, saturation, value = max\n\n        let difference = max - min\n        saturation = max === 0 ? 0 : difference / max\n\n        if (max === min) {\n          hue = 0\n        } else {\n          switch (max) {\n            case red:\n              hue = (green - blue) / difference + (green < blue ? 6 : 0)\n              break\n\n            case green:\n              hue = (blue - red) / difference + 2\n              break\n\n            case blue:\n              hue = (red - green) / difference + 4\n              break\n          }\n\n          hue /= 6\n        }\n\n        return [hue, saturation, value]\n      },\n\n      RGBToHex: (r, g, b) => {\n        let { unitToHex } = this.PRIVATE\n        return `${unitToHex(r)}${unitToHex(g)}${unitToHex(b)}`\n      },\n\n      unitToHex: unit => {\n        let hex = Number(unit).toString(16)\n\n        if (hex.length < 2) {\n          hex = `0${hex}`\n        }\n\n        return hex.toUpperCase()\n      },\n\n      setColor: (position, percentage = false) => {\n        let { getPercentageDecimal } = this.UTIL\n\n        switch (this.mode) {\n          case 'single-hue':\n            this.PRIVATE.saturation = getPercentageDecimal(position.x, this.clientWidth) * 100\n            this.PRIVATE.value = 100 - (getPercentageDecimal(position.y, this.clientHeight) * 100)\n            break\n\n          case 'all-hues':\n            this.PRIVATE.hue = this.orientation === 'horizontal'\n              ? getPercentageDecimal(position.x, this.clientWidth) * 360\n              : getPercentageDecimal(position.y, this.clientHeight) * 360\n\n            this.PRIVATE.saturation = 100\n            this.PRIVATE.value = 100\n            break\n        }\n      },\n\n      setRGB: (r, g, b) => {\n        let { generateColorObject, generatePositionObject, handles, RGBToHSV } = this.PRIVATE\n        let hsv = RGBToHSV(r, g, b)\n\n        this.PRIVATE.hue = hsv[0] * 360\n        this.PRIVATE.saturation = hsv[1] * 100\n        this.PRIVATE.value = hsv[2] * 100\n\n        this.PRIVATE.draw()\n\n        this.emit('change', {\n          color: generateColorObject(),\n          position: generatePositionObject()\n        })\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        let { defaultMode, validModes } = this.PRIVATE\n\n        switch (attribute) {\n          case 'mode':\n            let arr = newValue.split(' ').filter(axis => validModes.includes(axis))\n\n            if (!arr.length) {\n              this.setAttribute('mode', defaultMode)\n\n              return this.UTIL.throwError({\n                message: `Invalid mode \"${newValue}\". Valid values include: \"${validModes.join('\", \"')}\"`\n              })\n            }\n\n            break\n        }\n      },\n\n      connected: () => {\n        // Remove default author-slider pointerdown handler\n        this.removeEventListener('pointerdown', this.PRIVATE.pointerdownHandler)\n\n        // Reset AuthorSliderElement defaults\n        if (!this.hasAttribute('axis')) {\n          this.axis = this.PRIVATE.defaultAxis\n        }\n\n        this.UTIL.insertStyleRules({\n          bgColorRule: ':host {}'\n        })\n\n        this.PRIVATE.draw()\n      },\n\n      pointerdown: evt => {\n        this.PRIVATE.position = this.PRIVATE.getRelativePosition(evt)\n\n        let { getPercentageDecimal } = this.UTIL\n        let { generateColorObject, generatePositionObject, handles, HSVToRGB, hue, pointermoveHandler, position } = this.PRIVATE\n\n        if (handles.length > 1) {\n          return\n        }\n\n        this.PRIVATE.setColor(position)\n\n        if (handles.length !== 0) {\n          handles.item(0).position = this.position\n        }\n\n        this.emit('change', {\n          color: generateColorObject(),\n          position: generatePositionObject()\n        })\n\n        document.addEventListener('pointermove', pointermoveHandler)\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return [...AuthorSliderElement.observedAttributes, 'mode', 'orientation']\n  }\n\n  get hue () {\n    return this.PRIVATE.hue\n  }\n\n  set hue (val) {\n    val = Math.max(0, Math.min(360, val))\n    this.PRIVATE.hue = val === 360 ? 0 : val\n    this.PRIVATE.draw()\n\n    this.emit('change', {\n      color: this.PRIVATE.generateColorObject(),\n      position: this.PRIVATE.generatePositionObject()\n    })\n  }\n\n  // set saturation (val) {\n  //   this.PRIVATE.saturation = Math.max(0, Math.min(100, val))\n  //   console.log('REPOSITION TARGET')\n  // }\n\n  // set value (val) {\n  //   this.PRIVATE.value = Math.max(0, Math.min(100, val))\n  //   console.log('REPOSITION TARGET')\n  // }\n\n  // set hsv ({ h, s, v }) {\n  //   console.log(h, s, v)\n  // }\n\n  // set lightness (val) {\n  //   console.log(val);\n  // }\n\n  // set hsl ({ h, s, l }) {\n  //   console.log(h, s, l)\n  // }\n\n  // set red (val) {\n  //   console.log(val);\n  // }\n\n  // set g (val) {\n  //   console.log(val);\n  // }\n\n  // set blue (val) {\n  //   console.log(val);\n  // }\n\n  set rgb ({r = 0, g = 0, b = 0}) {\n    this.PRIVATE.setRGB(r, g, b)\n  }\n\n  // get hex () {\n  //\n  // }\n\n  set hex (val) {\n    this.PRIVATE.setRGB(...this.PRIVATE.hexToRGB(val))\n  }\n\n  // set alpha (val) {\n  //   console.log(val)\n  // }\n\n  get position () {\n    return this.PRIVATE.generatePositionObject()\n  }\n\n  // get previousColor () {\n  //   return this.PRIVATE.generateColorObj(this.PRIVATE.previousColor)\n  // }\n\n  get selectedColor () {\n    return this.PRIVATE.generateColorObject()\n  }\n\n  // set selectedColor (color) {\n  //   if (color.startsWith('#')) {\n  //     return console.log('process hex')\n  //   }\n  //\n  //   if (color.startsWith('rgb')) {\n  //     return console.log('process rgb')\n  //   }\n  //\n  //   if (color.startsWith('hsl')) {\n  //     return console.log('process hsl')\n  //   }\n  // }\n}\n\ncustomElements.define('author-color-picker', AuthorColorPickerElement)\n\nexport default AuthorColorPickerElement\n"],"names":["AuthorColorPickerElement","PRIVATE","defaultAxis","pointerupHandler","evt","generateColorObject","generatePositionObject","handles","pointermoveHandler","reposition","position","length","item","emit","color","document","removeEventListener","buttons","addEventListener","getPercentageDecimal","UTIL","relative","getRelativePosition","x","y","setColor","defineProperties","defaultMode","private","readonly","default","defaultOrientation","validModes","hue","saturation","value","alpha","defineAttributes","mode","orientation","definePrivateMethods","draw","HSVToRGB","setStyleProperty","join","pct","h","s","v","rgb","r","g","b","hex","RGBToHex","rgba","hexToRGB","String","match","short","long","Array","from","Number","parseInt","map","n","i","f","p","q","t","Math","max","min","round","floor","RGBToHSV","red","green","blue","difference","unitToHex","unit","toString","toUpperCase","clientWidth","clientHeight","setRGB","hsv","registerListeners","detail","attribute","oldValue","newValue","arr","split","filter","axis","includes","setAttribute","throwError","message","connected","pointerdownHandler","hasAttribute","insertStyleRules","bgColorRule","pointerdown","val","AuthorSliderElement","observedAttributes","customElements","define"],"mappings":"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"}