var AuthorColorPickerElement=function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-color-picker> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),function(){let e=Array.from(new Set([])).filter(e=>!customElements.get(e));e.length>0&&(console.error(`[ERROR] <author-color-picker> Required dependenc${1!==e.length?"ies":"y"} not found: ${e.map(e=>`<${e}>`).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1])}`),e.forEach((e,t)=>console.info(`${t+1}. <${e}> is available at ${"https://github.com/author-elements/color-picker".replace("color-picker",e.replace("author-",""))}`)))}();class e extends AuthorSliderElement{constructor(){super('<template><style>@charset "UTF-8"; :host{contain:content;display:flex;flex-direction:column}:host *,:host :after,:host :before{box-sizing:border-box}:host .wrapper{position:relative;flex:1;display:flex;flex-direction:column}:host .canvas-wrapper{flex:1;display:flex;flex-direction:column}:host canvas{flex:1;display:block;width:100%;height:100%}:host ::slotted(*){position:absolute;z-index:1}author-color-picker{contain:content;display:flex;flex-direction:column}author-color-picker *,author-color-picker :after,author-color-picker :before{box-sizing:border-box}author-color-picker .wrapper{position:relative;flex:1;display:flex;flex-direction:column}author-color-picker .canvas-wrapper{flex:1;display:flex;flex-direction:column}author-color-picker canvas{flex:1;display:block;width:100%;height:100%}author-color-picker *{position:absolute;z-index:1}</style><div class="wrapper"><slot></slot><div class="canvas-wrapper"><canvas></canvas></div></div></template>'),this.PRIVATE.defaultAxis="*",this.PRIVATE.pointerupHandler=(e=>{let{generateColorObject:t,generatePositionObject:i,handles:o,pointermoveHandler:r,pointerupHandler:a}=this.PRIVATE,n=!0,l=null;o.length>1?n=!1:0!==o.length&&(o.item(0).position=l=i()),n&&this.emit("change",{color:t(),position:l||i()}),document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",a)}),this.PRIVATE.pointermoveHandler=(e=>{if(e.buttons<1)return;document.addEventListener("pointerup",this.PRIVATE.pointerupHandler);let{getPercentageDecimal:t}=this.UTIL,{generateColorObject:i,generatePositionObject:o,handles:r,position:a}=this.PRIVATE,n=this.PRIVATE.getRelativePosition(e);this.position.x&&n.x===a.x&&this.position.y&&n.y===a.y||(this.PRIVATE.setColor(n),this.PRIVATE.position=n,0!==r.length&&(r.item(0).position=this.position),this.emit("slide",{color:i(),position:o()}))}),this.UTIL.defineProperties({defaultMode:{private:!0,readonly:!0,default:"single-hue"},defaultOrientation:{private:!0,readonly:!0,default:"horizontal"},validModes:{private:!0,readonly:!0,default:["single-hue","all-hues","gradient"]},hue:{private:!0,default:0},saturation:{private:!0,default:0},value:{private:!0,default:100},alpha:{private:!0,default:100},canvas:{private:!0,readonly:!0,get:()=>this.shadowRoot.querySelector("canvas")},context:{private:!0,readonly:!0,get:()=>this.PRIVATE.canvas.getContext("2d")},initialWidth:{private:!0,default:236},initialHeight:{private:!0,default:118}}),this.UTIL.defineAttributes({mode:this.PRIVATE.defaultMode,orientation:this.PRIVATE.defaultOrientation}),this.UTIL.definePrivateMethods({drawSingleHueSpectrum:(e,t,i)=>{let{context:o,HSVToRGB:r}=this.PRIVATE,a=r(e,100,100);o.clearRect(0,0,t,i),o.fillStyle=`rgba(${a[0]}, ${a[1]}, ${a[2]}, 1)`,o.fillRect(0,0,t,i);let n={x:o.createLinearGradient(0,0,t,0),y:o.createLinearGradient(0,0,0,i)};n.x.addColorStop(0,"rgba(255, 255, 255, 1)"),n.x.addColorStop(1,"rgba(255, 255, 255, 0)"),o.fillStyle=n.x,o.fillRect(0,0,t,i),n.y.addColorStop(0,"rgba(0, 0, 0, 0)"),n.y.addColorStop(1,"rgba(0, 0, 0, 1)"),o.fillStyle=n.y,o.fillRect(0,0,t,i)},drawAllHueSpectrum:(e,t,i="horizontal")=>{let{context:o}=this.PRIVATE,r="horizontal"===i?[0,0,e,0]:[0,0,0,t],a=o.createLinearGradient(...r);a.addColorStop(0,"#F00"),a.addColorStop(1/6,"#FF0"),a.addColorStop(2/6,"#0F0"),a.addColorStop(.5,"#0FF"),a.addColorStop(4/6,"#00F"),a.addColorStop(5/6,"#F0F"),a.addColorStop(1,"#F00"),o.fillStyle=a,o.fillRect(0,0,e,t)},draw:(e=this.clientWidth,t=this.clientHeight,i=this.PRIVATE.hue)=>{let{canvas:o,drawAllHueSpectrum:r,drawSingleHueSpectrum:a}=this.PRIVATE;switch(o.width=e,o.height=t,this.mode){case"single-hue":return a(i,e,t);case"all-hues":return r(e,t);default:this.UTIL.throwError({message:`Invalid mode "${this.mode}"`})}},generateColorObject:(e=this.PRIVATE.hue,t=this.PRIVATE.saturation,i=this.PRIVATE.value)=>{let{alpha:o,HSVToRGB:r}=this.PRIVATE,a=r(e,t,i);return{r:a[0],g:a[1],b:a[2],a:o,hex:`#${this.PRIVATE.RGBToHex(...a)}`,rgba:`rgba(${a.join(",")},${o/100})`}},HSVToRGB:(e,t,i)=>{let o,r,a,n,l,s,h,d;if(e=Math.max(0,Math.min(360,e)),t=Math.max(0,Math.min(100,t)),i=Math.max(0,Math.min(100,i)),i/=100,0==(t/=100))return o=r=a=i,[Math.round(255*o),Math.round(255*r),Math.round(255*a)];switch(s=i*(1-t),h=i*(1-t*(l=(e/=60)-(n=Math.floor(e)))),d=i*(1-t*(1-l)),n){case 0:o=i,r=d,a=s;break;case 1:o=h,r=i,a=s;break;case 2:o=s,r=i,a=d;break;case 3:o=s,r=h,a=i;break;case 4:o=d,r=s,a=i;break;default:o=i,r=s,a=h}return[Math.round(255*o),Math.round(255*r),Math.round(255*a)]},RGBToHSV:(e,t,i)=>{e/=255,t/=255,i/=255;let o,r,a=Math.max(e,t,i),n=Math.min(e,t,i),l=a,s=a-n;if(r=0===a?0:s/a,a===n)o=0;else{switch(a){case e:o=(t-i)/s+(t<i?6:0);break;case t:o=(i-e)/s+2;break;case i:o=(e-t)/s+4}o/=6}return[o,r,l]},RGBToHex:(e,t,i)=>{let{unitToHex:o}=this.PRIVATE;return`${o(e)}${o(t)}${o(i)}`},unitToHex:e=>{let t=Number(e).toString(16);return t.length<2&&(t=`0${t}`),t.toUpperCase()},setColor:(e,t=!1)=>{let{getPercentageDecimal:i}=this.UTIL;switch(this.mode){case"single-hue":this.PRIVATE.saturation=100*i(e.x,this.clientWidth),this.PRIVATE.value=100-100*i(e.y,this.clientHeight);break;case"all-hues":this.PRIVATE.hue="horizontal"===this.orientation?360*i(e.x,this.clientWidth):360*i(e.y,this.clientHeight),this.PRIVATE.saturation=100,this.PRIVATE.value=100}}}),this.UTIL.registerListeners(this,{"attribute.change":e=>{let{attribute:t,oldValue:i,newValue:o}=e.detail;if(o===i)return;let{defaultMode:r,validModes:a}=this.PRIVATE;switch(t){case"mode":if(!o.split(" ").filter(e=>a.includes(e)).length)return this.setAttribute("mode",r),this.UTIL.throwError({message:`Invalid mode "${o}". Valid values include: "${a.join('", "')}"`})}},connected:()=>{this.hasAttribute("axis")||(this.axis=this.PRIVATE.defaultAxis),this.removeEventListener("pointerdown",this.PRIVATE.pointerdownHandler);let{draw:e,initialWidth:t,initialHeight:i}=this.PRIVATE;e(t,i)},pointerdown:e=>{this.PRIVATE.position=this.PRIVATE.getRelativePosition(e);let{getPercentageDecimal:t}=this.UTIL,{generateColorObject:i,generatePositionObject:o,handles:r,HSVToRGB:a,hue:n,pointermoveHandler:l,position:s}=this.PRIVATE;r.length>1||(this.PRIVATE.setColor(s),0!==r.length&&(r.item(0).position=this.position),this.emit("change",{color:i(),position:o()}),document.addEventListener("pointermove",l))}})}static get observedAttributes(){return[...AuthorSliderElement.observedAttributes,"mode","orientation"]}get hue(){return this.PRIVATE.hue}set hue(e){e=Math.max(0,Math.min(360,e)),this.PRIVATE.hue=360===e?0:e,this.PRIVATE.draw(),this.emit("change",{color:this.PRIVATE.generateColorObject(),position:this.PRIVATE.generatePositionObject()})}set rgb({r:e,g:t,b:i}){let{generateColorObject:o,generatePositionObject:r,handles:a,RGBToHSV:n,setColor:l}=this.PRIVATE,s=n(e,t,i);this.PRIVATE.hue=360*s[0],this.PRIVATE.saturation=100*s[1],this.PRIVATE.value=100*s[2],this.PRIVATE.draw(),1===a.length&&(a.item(0).position={x:{pct:s[1]},y:{pct:1-s[2]}}),this.emit("change",{color:o(),position:r()})}get position(){return this.PRIVATE.generatePositionObject()}get selectedColor(){return this.PRIVATE.generateColorObject()}}return customElements.define("author-color-picker",e),e}();
//# sourceMappingURL=author-color-picker.min.js.map
