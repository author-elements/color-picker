var AuthorColorPickerElement=function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-color-picker> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),function(){let e=Array.from(new Set([])).filter(e=>!customElements.get(e));e.length>0&&(console.error(`[ERROR] <author-color-picker> Required dependenc${1!==e.length?"ies":"y"} not found: ${e.map(e=>`<${e}>`).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1])}`),e.forEach((e,t)=>console.info(`${t+1}. <${e}> is available at ${"https://github.com/author-elements/color-picker".replace("color-picker",e.replace("author-",""))}`)))}();class e extends AuthorSliderElement{constructor(){super('<template><style>@charset "UTF-8"; :host{contain:content;display:flex;flex-direction:column}:host *,:host :after,:host :before{box-sizing:border-box}:host ::slotted(*){position:absolute;z-index:1}:host,:host([mode=single-hue]){background:linear-gradient(to bottom,transparent 0,#000 100%),linear-gradient(to right,#fff 0,transparent 100%)}:host([mode=all-hues]){background:linear-gradient(to right,red 0,#ff0 calc(1 / 6 * 100%),#0f0 calc(1 / 3 * 100%),#0ff 50%,#00f calc(2 / 3 * 100%),#f0f calc(5 / 6 * 100%),red 100%)}author-color-picker{contain:content;display:flex;flex-direction:column}author-color-picker *,author-color-picker :after,author-color-picker :before{box-sizing:border-box}author-color-picker *{position:absolute;z-index:1}author-color-picker,author-color-picker[mode=single-hue]{background:linear-gradient(to bottom,transparent 0,#000 100%),linear-gradient(to right,#fff 0,transparent 100%)}author-color-picker[mode=all-hues]{background:linear-gradient(to right,red 0,#ff0 calc(1 / 6 * 100%),#0f0 calc(1 / 3 * 100%),#0ff 50%,#00f calc(2 / 3 * 100%),#f0f calc(5 / 6 * 100%),red 100%)}</style><slot></slot></template>'),this.PRIVATE.defaultAxis="*",this.PRIVATE.pointerupHandler=(e=>{let{generateColorObject:t,generatePositionObject:i,handles:o,pointermoveHandler:r,pointerupHandler:n}=this.PRIVATE,a=!0,s=null;o.length>1?a=!1:0!==o.length&&(o.item(0).position=s=i()),a&&this.emit("change",{color:t(),position:s||i()}),document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",n)}),this.PRIVATE.pointermoveHandler=(e=>{if(e.buttons<1)return;document.addEventListener("pointerup",this.PRIVATE.pointerupHandler);let{getPercentageDecimal:t}=this.UTIL,{generateColorObject:i,generatePositionObject:o,handles:r,position:n}=this.PRIVATE,a=this.PRIVATE.getRelativePosition(e);this.position.x&&a.x===n.x&&this.position.y&&a.y===n.y||(this.PRIVATE.setColor(a),this.PRIVATE.position=a,0!==r.length&&(r.item(0).position=this.position),this.emit("slide",{color:i(),position:o()}))}),this.UTIL.defineProperties({defaultMode:{private:!0,readonly:!0,default:"single-hue"},defaultOrientation:{private:!0,readonly:!0,default:"horizontal"},validModes:{private:!0,readonly:!0,default:["single-hue","all-hues","gradient"]},hue:{private:!0,default:0},saturation:{private:!0,default:0},value:{private:!0,default:100},alpha:{private:!0,default:100}}),this.UTIL.defineAttributes({mode:this.PRIVATE.defaultMode,orientation:this.PRIVATE.defaultOrientation}),this.UTIL.definePrivateMethods({draw:()=>{let{handles:e,hue:t,HSVToRGB:i,saturation:o,value:r}=this.PRIVATE;switch(this.mode){case"single-hue":return this.UTIL.setStyleProperty("bgColorRule","background-color",`rgba(${i(t,100,100).join(", ")}, 1)`)}1===e.length&&(e.item(0).position={x:{pct:o/100},y:{pct:1-r/100}})},generateColorObject:(e=this.PRIVATE.hue,t=this.PRIVATE.saturation,i=this.PRIVATE.value)=>{let{alpha:o,HSVToRGB:r}=this.PRIVATE,n=r(e,t,i),a=n[0],s=n[1],l=n[2];return{hue:this.PRIVATE.hue,saturation:this.PRIVATE.saturation,value:this.PRIVATE.value,r:a,g:s,b:l,alpha:o,hex:`#${this.PRIVATE.RGBToHex(...n)}`,rgba:`rgba(${n.join(",")},${o/100})`}},hexToRGB:e=>{let[,t,i]=String(e).match(/^#?(?:([\da-f]{3})[\da-f]?|([\da-f]{6})(?:[\da-f]{2})?)$/i)||[];if(t)return Array.from(t,e=>Number.parseInt(e,16)).map(e=>e<<4|e);let o=Number.parseInt(i,16);return[o>>16,o>>8&255,255&o]},HSVToRGB:(e,t,i)=>{let o,r,n,a,s,l,h,u;if(e=Math.max(0,Math.min(360,e)),t=Math.max(0,Math.min(100,t)),i=Math.max(0,Math.min(100,i)),i/=100,0==(t/=100))return o=r=n=i,[Math.round(255*o),Math.round(255*r),Math.round(255*n)];switch(l=i*(1-t),h=i*(1-t*(s=(e/=60)-(a=Math.floor(e)))),u=i*(1-t*(1-s)),a){case 0:o=i,r=u,n=l;break;case 1:o=h,r=i,n=l;break;case 2:o=l,r=i,n=u;break;case 3:o=l,r=h,n=i;break;case 4:o=u,r=l,n=i;break;default:o=i,r=l,n=h}return[Math.round(255*o),Math.round(255*r),Math.round(255*n)]},RGBToHSV:(e,t,i)=>{e/=255,t/=255,i/=255;let o,r,n=Math.max(e,t,i),a=Math.min(e,t,i),s=n,l=n-a;if(r=0===n?0:l/n,n===a)o=0;else{switch(n){case e:o=(t-i)/l+(t<i?6:0);break;case t:o=(i-e)/l+2;break;case i:o=(e-t)/l+4}o/=6}return[o,r,s]},RGBToHex:(e,t,i)=>{let{unitToHex:o}=this.PRIVATE;return`${o(e)}${o(t)}${o(i)}`},unitToHex:e=>{let t=Number(e).toString(16);return t.length<2&&(t=`0${t}`),t.toUpperCase()},setColor:(e,t=!1)=>{let{getPercentageDecimal:i}=this.UTIL;switch(this.mode){case"single-hue":this.PRIVATE.saturation=100*i(e.x,this.clientWidth),this.PRIVATE.value=100-100*i(e.y,this.clientHeight);break;case"all-hues":this.PRIVATE.hue="horizontal"===this.orientation?360*i(e.x,this.clientWidth):360*i(e.y,this.clientHeight),this.PRIVATE.saturation=100,this.PRIVATE.value=100}},setRGB:(e,t,i)=>{let{generateColorObject:o,generatePositionObject:r,handles:n,RGBToHSV:a}=this.PRIVATE,s=a(e,t,i);this.PRIVATE.hue=360*s[0],this.PRIVATE.saturation=100*s[1],this.PRIVATE.value=100*s[2],this.PRIVATE.draw(),this.emit("change",{color:o(),position:r()})}}),this.UTIL.registerListeners(this,{"attribute.change":e=>{let{attribute:t,oldValue:i,newValue:o}=e.detail;if(o===i)return;let{defaultMode:r,validModes:n}=this.PRIVATE;switch(t){case"mode":if(!o.split(" ").filter(e=>n.includes(e)).length)return this.setAttribute("mode",r),this.UTIL.throwError({message:`Invalid mode "${o}". Valid values include: "${n.join('", "')}"`})}},connected:()=>{this.removeEventListener("pointerdown",this.PRIVATE.pointerdownHandler),this.hasAttribute("axis")||(this.axis=this.PRIVATE.defaultAxis),this.UTIL.insertStyleRules({bgColorRule:":host {}"}),this.PRIVATE.draw()},pointerdown:e=>{this.PRIVATE.position=this.PRIVATE.getRelativePosition(e);let{getPercentageDecimal:t}=this.UTIL,{generateColorObject:i,generatePositionObject:o,handles:r,HSVToRGB:n,hue:a,pointermoveHandler:s,position:l}=this.PRIVATE;r.length>1||(this.PRIVATE.setColor(l),0!==r.length&&(r.item(0).position=this.position),this.emit("change",{color:i(),position:o()}),document.addEventListener("pointermove",s))}})}static get observedAttributes(){return[...AuthorSliderElement.observedAttributes,"mode","orientation"]}get hue(){return this.PRIVATE.hue}set hue(e){e=Math.max(0,Math.min(360,e)),this.PRIVATE.hue=360===e?0:e,this.PRIVATE.draw(),this.emit("change",{color:this.PRIVATE.generateColorObject(),position:this.PRIVATE.generatePositionObject()})}set rgb({r:e=0,g:t=0,b:i=0}){this.PRIVATE.setRGB(e,t,i)}set hex(e){this.PRIVATE.setRGB(...this.PRIVATE.hexToRGB(e))}get position(){return this.PRIVATE.generatePositionObject()}get selectedColor(){return this.PRIVATE.generateColorObject()}}return customElements.define("author-color-picker",e),e}();
//# sourceMappingURL=author-color-picker.min.js.map
