var AuthorColorPickerElement=function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-color-picker> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),function(){let e=Array.from(new Set([])).filter(e=>!customElements.get(e));e.length>0&&(console.error(`[ERROR] <author-color-picker> Required dependenc${1!==e.length?"ies":"y"} not found: ${e.map(e=>`<${e}>`).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1])}`),e.forEach((e,t)=>console.info(`${t+1}. <${e}> is available at ${"https://github.com/author-elements/color-picker".replace("color-picker",e.replace("author-",""))}`)))}();class e extends(AuthorBaseElement(HTMLElement)){constructor(){super('<template><style>@charset "UTF-8"; :host{contain:content;display:flex;flex-direction:column}:host *,:host :after,:host :before{box-sizing:border-box}:host .wrapper{position:relative;flex:1;display:flex;flex-direction:column}:host .canvas-wrapper{flex:1;display:flex;flex-direction:column}:host canvas{flex:1;display:block;width:100%;height:100%}:host ::slotted(*){position:absolute;z-index:1}author-color-picker{contain:content;display:flex;flex-direction:column}author-color-picker *,author-color-picker :after,author-color-picker :before{box-sizing:border-box}author-color-picker .wrapper{position:relative;flex:1;display:flex;flex-direction:column}author-color-picker .canvas-wrapper{flex:1;display:flex;flex-direction:column}author-color-picker canvas{flex:1;display:block;width:100%;height:100%}author-color-picker *{position:absolute;z-index:1}</style><div class="wrapper"><slot></slot><div class="canvas-wrapper"><canvas></canvas></div></div></template>'),this.UTIL.defineProperties({hue:{private:!0,default:0},saturation:{private:!0,default:0},value:{private:!0,default:100},alpha:{private:!0,default:100},canvas:{private:!0,readonly:!0,get:()=>this.shadowRoot.querySelector("canvas")},context:{private:!0,readonly:!0,get:()=>this.PRIVATE.canvas.getContext("2d")},position:{private:!0,default:{x:0,y:0}},dimensions:{private:!0,readonly:!0,get:()=>this.PRIVATE.canvas.getBoundingClientRect()},initialWidth:{private:!0,default:236},initialHeight:{private:!0,default:118}}),this.UTIL.definePrivateMethods({draw:(e=this.PRIVATE.dimensions.width,t=this.PRIVATE.dimensions.height,i=this.PRIVATE.hue)=>{let{canvas:o,context:a,HSVToRGB:n}=this.PRIVATE;o.width=e,o.height=t;let r=n(i,100,100);a.clearRect(0,0,e,t),a.fillStyle=`rgba(${r[0]}, ${r[1]}, ${r[2]}, 1)`,a.fillRect(0,0,e,t);let s={x:a.createLinearGradient(0,0,e,0),y:a.createLinearGradient(0,0,0,t)};s.x.addColorStop(0,"rgba(255, 255, 255, 1)"),s.x.addColorStop(1,"rgba(255, 255, 255, 0)"),a.fillStyle=s.x,a.fillRect(0,0,e,t),s.y.addColorStop(0,"rgba(0, 0, 0, 0)"),s.y.addColorStop(1,"rgba(0, 0, 0, 1)"),a.fillStyle=s.y,a.fillRect(0,0,e,t)},generateColorObject:(e=this.PRIVATE.hue,t=this.PRIVATE.saturation,i=this.PRIVATE.value)=>{let{alpha:o,HSVToRGB:a}=this.PRIVATE,n=a(e,t,i);return{r:n[0],g:n[1],b:n[2],a:o,hex:`#${this.PRIVATE.RGBToHex(...n)}`,rgba:`rgba(${n.join(",")},${o/100})`}},generatePositionObject:(e=this.PRIVATE.position)=>({x:{px:e.x,pct:this.UTIL.getPercentageDecimal(e.x,this.clientWidth)},y:{px:e.y,pct:this.UTIL.getPercentageDecimal(e.y,this.clientHeight)}}),getRelativePosition:e=>{let{top:t,left:i}=this.PRIVATE.dimensions,o={x:e.pageX-i-this.clientLeft,y:e.pageY-t-this.clientTop};return{x:Math.min(Math.max(o.x,0),this.clientWidth),y:Math.min(Math.max(o.y,0),this.clientHeight)}},HSVToRGB:(e,t,i)=>{let o,a,n,r,s,l,h,c;if(e=Math.max(0,Math.min(360,e)),t=Math.max(0,Math.min(100,t)),i=Math.max(0,Math.min(100,i)),i/=100,0==(t/=100))return o=a=n=i,[Math.round(255*o),Math.round(255*a),Math.round(255*n)];switch(l=i*(1-t),h=i*(1-t*(s=(e/=60)-(r=Math.floor(e)))),c=i*(1-t*(1-s)),r){case 0:o=i,a=c,n=l;break;case 1:o=h,a=i,n=l;break;case 2:o=l,a=i,n=c;break;case 3:o=l,a=h,n=i;break;case 4:o=c,a=l,n=i;break;default:o=i,a=l,n=h}return[Math.round(255*o),Math.round(255*a),Math.round(255*n)]},RGBToHex:(e,t,i)=>{let{unitToHex:o}=this.PRIVATE;return`${o(e)}${o(t)}${o(i)}`},unitToHex:e=>{let t=Number(e).toString(16);return t.length<2&&(t=`0${t}`),t.toUpperCase()},pointermoveHandler:e=>{if(e.buttons<1)return;document.addEventListener("pointerup",this.PRIVATE.pointerupHandler);let{getPercentageDecimal:t}=this.UTIL,{generateColorObject:i,generatePositionObject:o,position:a}=this.PRIVATE,n=this.PRIVATE.getRelativePosition(e);n.x===a.x&&n.y===a.y||(this.PRIVATE.saturation=100*t(n.x,this.clientWidth),this.PRIVATE.value=100-100*t(n.y,this.clientHeight),this.PRIVATE.position=n,this.emit("sample",{color:i(),position:o()}))},pointerupHandler:e=>{let{generateColorObject:t,generatePositionObject:i,pointermoveHandler:o,pointerupHandler:a}=this.PRIVATE;this.emit("change",{color:t(),position:i()}),document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",a)}}),this.UTIL.registerListeners(this,{connected:()=>{let{draw:e,initialWidth:t,initialHeight:i}=this.PRIVATE;e(t,i)},pointerenter:e=>{let{dimensions:t,draw:i,initialWidth:o,initialHeight:a}=this.PRIVATE;o===t.width&&a===t.height||i()},pointerdown:e=>{this.PRIVATE.position=this.PRIVATE.getRelativePosition(e);let{getPercentageDecimal:t}=this.UTIL,{generateColorObject:i,generatePositionObject:o,HSVToRGB:a,hue:n,pointermoveHandler:r,position:s}=this.PRIVATE;this.PRIVATE.saturation=100*t(s.x,this.clientWidth),this.PRIVATE.value=100-100*t(s.y,this.clientHeight),this.emit("change",{color:i(),position:o()}),document.addEventListener("pointermove",r)}})}set hue(e){this.PRIVATE.hue=Math.max(0,Math.min(360,e)),this.PRIVATE.draw()}set saturation(e){this.PRIVATE.saturation=Math.max(0,Math.min(100,e)),console.log("REPOSITION TARGET")}set value(e){this.PRIVATE.value=Math.max(0,Math.min(100,e)),console.log("REPOSITION TARGET")}set hsv({h:e,s:t,v:i}){console.log(e,t,i)}set lightness(e){console.log(e)}set hsl({h:e,s:t,l:i}){console.log(e,t,i)}set red(e){console.log(e)}set g(e){console.log(e)}set blue(e){console.log(e)}set rgb({r:e,g:t,b:i}){console.log(e,t,i)}get hex(){}set hex(e){console.log(e)}set alpha(e){console.log(e)}get position(){return this.PRIVATE.generatePositionObject()}}return customElements.define("author-color-picker",e),e}();
//# sourceMappingURL=author-color-picker.min.js.map
